tr.openWeb.globalSearch={active:!1,expand:!1,config:{duration:150},$el:$(".global-search"),$input:$(".global-search-input"),$toggle:$(".global-search-toggle"),$predictive:$(".global-search-predictive"),inputval:"",init:function(){this.$el.length&&(this.$siteSpecificHeader=$(".site-specific-header.site-specific-header--expanded"),this.handlers())
},handlers:function(){var d=this;
this.$el.unbind();
this.$input.unbind();
this.$toggle.unbind();
this.$toggle.on("click",function(a){a.preventDefault(),d.active===!0?d.close():d.open()
}),this.$el.on("keydown",function(a){d.keyPredictive(a)
}),this.$input.on("change keyup paste",function(){var a=$(this).val();
a.length>1?d.showPredictive():d.hidePredictive()
}),this.$input.on("focus",function(){var a=tr.openWeb.tools.state.breakpoint,f=a===tr.openWeb.tools.settings.breakpointTags.desktop?!0:!1,e=a===tr.openWeb.tools.settings.breakpointTags.widescreen?!0:!1;
(f||e)&&d.$siteSpecificHeader.length&&d.open()
}),this.$input.on("blur",function(){setTimeout(function(){d.$siteSpecificHeader.length&&0===d.$predictive.find(":focus").length&&d.active===!0&&d.close()
},150)
}),Modernizr.touch&&this.$input.on("blur",function(a){setTimeout(function(){d.active===!0&&d.close(a)
},50)
})
},open:function(){var f=this,e=tr.openWeb.tools.state.breakpoint,h=e===tr.openWeb.tools.settings.breakpointTags.desktop?!0:!1,g=e===tr.openWeb.tools.settings.breakpointTags.widescreen?!0:!1;
tr.openWeb.primaryNavigation.active===!0&&tr.openWeb.primaryNavigation.close(),this.$el.addClass("active"),(h||g)&&f.$siteSpecificHeader.length?this.expandSearch():this.$input.focus(),$("body").on("click.tr.openWeb.globalSearch.watch",function(a){f.$el.is(a.target)||0!==f.$el.has(a.target).length||f.close()
}),$(document).trigger("globalSearch"),this.active=!0
},close:function(d){d&&(d.preventDefault(),d.stopPropagation()),this.$el.removeClass("active"),this.hidePredictive(),this.collapseSearch(),$("body").off("click.tr.openWeb.globalSearch.watch"),this.active=!1
},clickToSearch:function(a){var d=$("#searchform");
this.$input.val(a);
d.submit()
},showPredictive:function(){var d=this;
var h=$("#accountno").val();
var f=h.substring(0,4)+"/"+h.substring(4,6)+"/"+h.substring(6,8)+"/"+h.substring(8)+"/";
var e="//content.atomz.com/autocomplete/"+f;
var g=$(this.$input).val();
var i=7;
var j=1;
if(g!=d.inputval){$.ajax({url:e,data:{query:g,max_results:i,beginning:j},dataType:"jsonp",success:function(a){if(a.length){d.$predictive.html("");
d.$predictive.append("<ul></ul>");
$.each(a,function(l,m){var k="<strong>"+m.substring(0,g.length)+"</strong>"+m.substring(g.length);
d.$predictive.find("ul").append('<li><a href="javascript:void(0)" onclick="tr.openWeb.globalSearch.clickToSearch(\''+m+"');return false;\">"+k+"</a></li>")
})
}else{d.$predictive.html("")
}}});
d.inputval=g
}this.$predictive.show()
},hidePredictive:function(){this.$predictive.hide()
},keyPredictive:function(g){var f=this,j=g.keyCode||g.which;
if(27===j){this.$input.is(":focus")?(this.$input.blur(),this.close()):(g.preventDefault(),g.stopPropagation(),this.$input.focus())
}else{if(!(38!==j&&40!==j&&9!==j||this.active!==!0&&this.expand!==!0)){g.preventDefault(),g.stopPropagation();
var i=f.$predictive.find("a");
if(i.length){var h=i.index(i.filter(":focus"));
38===j&&h>0&&h--,(40===j||9===j)&&h<i.length-1&&h++,h||(h=0),i.eq(h).focus()
}}}},expandSearch:function(){this.$siteSpecificHeader.addClass("expanded-search"),this.expand=!0
},collapseSearch:function(){this.expand=!1,tr.openWeb.primaryNavigation.reset(),this.$siteSpecificHeader.removeClass("expanded-search")
}},$(function(){tr.openWeb.globalSearch.init()
});
tr.openWeb.searchBar={active:!1,$el:$(".search-bar.predictive"),$input:$(".search-bar-input"),$predictive:$(".search-bar-predictive"),inputval:"",init:function(){this.$el.length&&this.handlers()
},handlers:function(){var d=this;
this.$el.unbind();
this.$input.unbind();
this.$el.on("keydown",function(a){d.keyPredictive(a)
}),this.$input.on("change keyup paste",function(){var a=$(this).val();
a.length>1?d.showPredictive():d.hidePredictive()
}),this.$input.on("blur",function(){setTimeout(function(){0===d.$predictive.find(":focus").length&&d.hidePredictive()
},150)
})
},clickToSearch:function(a){var d=$(".search-bar .search-bar-form form");
this.$input.val(a);
d.submit()
},showPredictive:function(){var d=this;
var h=$("#accountno").val();
var f=h.substring(0,4)+"/"+h.substring(4,6)+"/"+h.substring(6,8)+"/"+h.substring(8)+"/";
var e="//content.atomz.com/autocomplete/"+f;
var g=$(this.$input).val();
var i=7;
var j=1;
if(g!=d.inputval){$.ajax({url:e,data:{query:g,max_results:i,beginning:j},dataType:"jsonp",success:function(a){if(a.length){d.$predictive.html("");
d.$predictive.append("<ul></ul>");
$.each(a,function(l,m){var k="<strong>"+m.substring(0,g.length)+"</strong>"+m.substring(g.length);
d.$predictive.find("ul").append('<li><a href="javascript:void(0)" onclick="tr.openWeb.searchBar.clickToSearch(\''+m+"');return false;\">"+k+"</a></li>")
})
}else{d.$predictive.html("")
}}});
d.inputval=g
}this.$predictive.show(),this.active=!0
},hidePredictive:function(){this.$predictive.hide(),this.active=!1
},keyPredictive:function(g){var f=this,j=g.keyCode||g.which;
if(27===j){this.$input.is(":focus")?this.$input.blur():(g.preventDefault(),g.stopPropagation(),this.$input.focus())
}else{if((38===j||40===j||9===j)&&this.active===!0){g.preventDefault(),g.stopPropagation();
var i=f.$predictive.find("a");
if(i.length){var h=i.index(i.filter(":focus"));
38===j&&h>0&&h--,(40===j||9===j)&&h<i.length-1&&h++,h||(h=0),i.eq(h).focus()
}}}}},$(function(){tr.openWeb.searchBar.init()
});
tr.openWeb.callSales={$el:$(".call-sales"),init:function(){this.$el.length&&this.handlers()
},handlers:function(){this.$el.find("select").unbind();
this.$el.find("select").on("change",function(){var d=$(this).val();
b=$(this).closest(".call-sales").find(".call-sales-body");
c=$(this).closest(".call-sales").find("#optionItem"+d);
b.hide();
c.show()
})
}},$(function(){tr.openWeb.callSales.init()
});
tr.openWeb.emailSales={$el:$(".form.tr-email-sales, .form.tr-form-advanced"),init:function(){var a=this;
var e="";
var d="";
a.$el.each(function(){var l=false;
var j=$(this);
if(j.hasClass("tr-form-advanced")){if(j.find('input[name="elqSiteId"]').length){e="contactinfo-data-"+j.find('input[name="elqFormName"]').val().slice(-10)
}if(j.find('input[name="form_id"]').length){e="contactinfo-data-"+j.find('input[name="form_id"]').val().slice(-10)
}var i=j.find("form");
var h=i.attr("data-destination");
var f=i.attr("data-destination-type");
if(f=="gated"){d="gated-"+i.attr("data-gate-id");
if(document.cookie.indexOf(d)!=-1){l=true;
var k=i.closest(".modal");
if(k){var g=k.attr("id");
$("a[data-target='#"+g+"']").attr("href",h).attr("data-toggle","")
}}}}j.on("submit",function(){tr.openWeb.emailSales.formSubmission(this,e,l);
return false
});
if(tr.openWeb.emailSales.preloadFormData(this,e)){j.find("input[required], textarea[required], select[required]").each(function(){tr.openWeb.formValidation.validateField($(this))
})
}})
},initCaptcha:function(){$(".captchaElement").each(function(d){var a=$(this);
grecaptcha.render(a.attr("id"),{sitekey:"6LfeCCQTAAAAAHS76JoQRpnAXuShecA8Uchbewnz",callback:function(){a.find("p.input-notice").remove()
}});
a.find('textarea[name="g-recaptcha-response"]').prop("required",true)
})
},formSubmission:function(h,g,f){var a=$(h);
var e=a.find("form");
var d=a.find("div.thank-you");
e.find("button[type=submit]").attr("disabled","disabled");
tr.openWeb.analytics.sendEvent("Form","Submit Success",location.href);
$.post(e.attr("data-action"),e.serialize(),function(m){if(m==="1"){$(document).trigger("tr/formsubmitted",h);
$.cookie(g,JSON.stringify($(e).serializeArray()),{path:"/"});
var j=e.attr("data-modal-id");
var l=e.attr("data-action");
var k=e.attr("data-destination");
var i=e.attr("data-destination-type");
var n=e.attr("data-cookie-exp");
g=e.attr("data-gate-id");
if(i=="gated"){g="gated-"+g;
if(f==false){if(n>0){$.cookie(g,1,{expires:new Date(Date.now()+86400000*n),path:"/"})
}else{$.cookie(g,1,{path:"/"})
}}window.location=k
}else{if(i=="overlay"){$("div.modal").each(function(){if($(this).attr("id")!=j){$(this).modal("hide")
}});
$("#"+j).modal("show")
}else{window.location=k
}}}else{alert("An error occurred while attempting to submit your request. Please try again later.");
e.find("button[type=submit]").removeAttr("disabled")
}})
},preloadFormData:function(j,i){var a=$(j);
var f=a.find("form");
var g=$.cookie(i);
var d=false;
if(g==null){return false
}if(!i){return false
}if(typeof g=="string"){try{g=$.parseJSON(g)
}catch(h){console.log("error parsing cookie data");
return false
}}else{return false
}$.each(g,function(e,m){var k=f.find('[name="'+m.name+'"]');
var l=k.attr("type");
if(k.length){switch(l){case"hidden":break;
case"checkbox":k.filter('[value="'+m.value+'"]').attr("checked","checked");
d=true;
break;
case"radio":k.filter('[value="'+m.value+'"]').attr("checked","checked");
d=true;
break;
default:k.val(m.value);
d=true
}}});
return d
}};
$(function(){tr.openWeb.emailSales.init()
});
var initCaptcha=function(){tr.openWeb.emailSales.initCaptcha()
};
"use strict";
tr.openWeb.rssFeed={$el:$(".tr-rss-feed"),init:function(){this.$el.each(function(){var h=$(this),j=h.data("feed-url"),f=h.data("count"),g=h.data("show-title")!==undefined,i=h.data("show-date")!==undefined,d=h.data("show-content")!==undefined,a=h.find(".feed-placeholder");
$.ajax({type:"POST",async:true,url:"/services/rssFeed",dataType:"json",data:{rssFeedURL:j,count:f}}).done(function(k){if(k==null||k==="error"){return
}e(k)
}).fail(function(){});
var e=function(t){var s="{items}";
var q=' <div class="col-sm-6 col-md-12 column entry">   <div class="contentItemManualWithDate manual1">     <div class="border">       {dateHtml}       {titleHtml}       {descriptionHtml}     </div>   </div> </div>';
var k='       <h5 class="heading-5 heading-related-content">         <a href="{href}" target="_self">{title}</a>       </h5>';
var n='       <time class="date" datetime="{date}">{humanDate}</time>';
var r='       <p class="description">{description}</p>';
var m='       <div class="clearfix visible-sm"></div>';
var p="";
for(var l=0;
t.length>l;
l++){var o=q.replace("{titleHtml}",g?k:"").replace("{dateHtml}",i?n:"").replace("{descriptionHtml}",d?r:"");
p+=o.replace("{title}",t[l].title).replace("{description}",t[l].contentSnippet).replace("{href}",t[l].link).replace("{humanDate}",t[l].humanDate).replace("{date}",t[l].shortDate);
if(l%2){p+=m
}}a.replaceWith(s.replace("{items}",p))
}
})
}};
$(function(){tr.openWeb.rssFeed.init()
});